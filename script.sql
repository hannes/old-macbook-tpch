.mode trash
.echo on

SET threads='4';
SET memory_limit='14GB';
SET temp_directory='.';

PRAGMA enable_profiling=json;
ATTACH 'tpch-sf100.db' AS tpch (READ_ONLY);
USE tpch;

PRAGMA profiling_output='profile-1-1.json';
.read tpch-sf100-q1.sql
PRAGMA profiling_output='profile-1-2.json';
.read tpch-sf100-q1.sql
PRAGMA profiling_output='profile-1-3.json';
.read tpch-sf100-q1.sql
PRAGMA profiling_output='profile-1-4.json';
.read tpch-sf100-q1.sql
PRAGMA profiling_output='profile-1-5.json';
.read tpch-sf100-q1.sql
PRAGMA profiling_output='profile-2-1.json';
.read tpch-sf100-q2.sql
PRAGMA profiling_output='profile-2-2.json';
.read tpch-sf100-q2.sql
PRAGMA profiling_output='profile-2-3.json';
.read tpch-sf100-q2.sql
PRAGMA profiling_output='profile-2-4.json';
.read tpch-sf100-q2.sql
PRAGMA profiling_output='profile-2-5.json';
.read tpch-sf100-q2.sql
PRAGMA profiling_output='profile-3-1.json';
.read tpch-sf100-q3.sql
PRAGMA profiling_output='profile-3-2.json';
.read tpch-sf100-q3.sql
PRAGMA profiling_output='profile-3-3.json';
.read tpch-sf100-q3.sql
PRAGMA profiling_output='profile-3-4.json';
.read tpch-sf100-q3.sql
PRAGMA profiling_output='profile-3-5.json';
.read tpch-sf100-q3.sql
PRAGMA profiling_output='profile-4-1.json';
.read tpch-sf100-q4.sql
PRAGMA profiling_output='profile-4-2.json';
.read tpch-sf100-q4.sql
PRAGMA profiling_output='profile-4-3.json';
.read tpch-sf100-q4.sql
PRAGMA profiling_output='profile-4-4.json';
.read tpch-sf100-q4.sql
PRAGMA profiling_output='profile-4-5.json';
.read tpch-sf100-q4.sql
PRAGMA profiling_output='profile-5-1.json';
.read tpch-sf100-q5.sql
PRAGMA profiling_output='profile-5-2.json';
.read tpch-sf100-q5.sql
PRAGMA profiling_output='profile-5-3.json';
.read tpch-sf100-q5.sql
PRAGMA profiling_output='profile-5-4.json';
.read tpch-sf100-q5.sql
PRAGMA profiling_output='profile-5-5.json';
.read tpch-sf100-q5.sql
PRAGMA profiling_output='profile-6-1.json';
.read tpch-sf100-q6.sql
PRAGMA profiling_output='profile-6-2.json';
.read tpch-sf100-q6.sql
PRAGMA profiling_output='profile-6-3.json';
.read tpch-sf100-q6.sql
PRAGMA profiling_output='profile-6-4.json';
.read tpch-sf100-q6.sql
PRAGMA profiling_output='profile-6-5.json';
.read tpch-sf100-q6.sql
PRAGMA profiling_output='profile-7-1.json';
.read tpch-sf100-q7.sql
PRAGMA profiling_output='profile-7-2.json';
.read tpch-sf100-q7.sql
PRAGMA profiling_output='profile-7-3.json';
.read tpch-sf100-q7.sql
PRAGMA profiling_output='profile-7-4.json';
.read tpch-sf100-q7.sql
PRAGMA profiling_output='profile-7-5.json';
.read tpch-sf100-q7.sql
PRAGMA profiling_output='profile-8-1.json';
.read tpch-sf100-q8.sql
PRAGMA profiling_output='profile-8-2.json';
.read tpch-sf100-q8.sql
PRAGMA profiling_output='profile-8-3.json';
.read tpch-sf100-q8.sql
PRAGMA profiling_output='profile-8-4.json';
.read tpch-sf100-q8.sql
PRAGMA profiling_output='profile-8-5.json';
.read tpch-sf100-q8.sql
PRAGMA profiling_output='profile-9-1.json';
.read tpch-sf100-q9.sql
PRAGMA profiling_output='profile-9-2.json';
.read tpch-sf100-q9.sql
PRAGMA profiling_output='profile-9-3.json';
.read tpch-sf100-q9.sql
PRAGMA profiling_output='profile-9-4.json';
.read tpch-sf100-q9.sql
PRAGMA profiling_output='profile-9-5.json';
.read tpch-sf100-q9.sql
PRAGMA profiling_output='profile-10-1.json';
.read tpch-sf100-q10.sql
PRAGMA profiling_output='profile-10-2.json';
.read tpch-sf100-q10.sql
PRAGMA profiling_output='profile-10-3.json';
.read tpch-sf100-q10.sql
PRAGMA profiling_output='profile-10-4.json';
.read tpch-sf100-q10.sql
PRAGMA profiling_output='profile-10-5.json';
.read tpch-sf100-q10.sql
PRAGMA profiling_output='profile-11-1.json';
.read tpch-sf100-q11.sql
PRAGMA profiling_output='profile-11-2.json';
.read tpch-sf100-q11.sql
PRAGMA profiling_output='profile-11-3.json';
.read tpch-sf100-q11.sql
PRAGMA profiling_output='profile-11-4.json';
.read tpch-sf100-q11.sql
PRAGMA profiling_output='profile-11-5.json';
.read tpch-sf100-q11.sql
PRAGMA profiling_output='profile-12-1.json';
.read tpch-sf100-q12.sql
PRAGMA profiling_output='profile-12-2.json';
.read tpch-sf100-q12.sql
PRAGMA profiling_output='profile-12-3.json';
.read tpch-sf100-q12.sql
PRAGMA profiling_output='profile-12-4.json';
.read tpch-sf100-q12.sql
PRAGMA profiling_output='profile-12-5.json';
.read tpch-sf100-q12.sql
PRAGMA profiling_output='profile-13-1.json';
.read tpch-sf100-q13.sql
PRAGMA profiling_output='profile-13-2.json';
.read tpch-sf100-q13.sql
PRAGMA profiling_output='profile-13-3.json';
.read tpch-sf100-q13.sql
PRAGMA profiling_output='profile-13-4.json';
.read tpch-sf100-q13.sql
PRAGMA profiling_output='profile-13-5.json';
.read tpch-sf100-q13.sql
PRAGMA profiling_output='profile-14-1.json';
.read tpch-sf100-q14.sql
PRAGMA profiling_output='profile-14-2.json';
.read tpch-sf100-q14.sql
PRAGMA profiling_output='profile-14-3.json';
.read tpch-sf100-q14.sql
PRAGMA profiling_output='profile-14-4.json';
.read tpch-sf100-q14.sql
PRAGMA profiling_output='profile-14-5.json';
.read tpch-sf100-q14.sql
PRAGMA profiling_output='profile-15-1.json';
.read tpch-sf100-q15.sql
PRAGMA profiling_output='profile-15-2.json';
.read tpch-sf100-q15.sql
PRAGMA profiling_output='profile-15-3.json';
.read tpch-sf100-q15.sql
PRAGMA profiling_output='profile-15-4.json';
.read tpch-sf100-q15.sql
PRAGMA profiling_output='profile-15-5.json';
.read tpch-sf100-q15.sql
PRAGMA profiling_output='profile-16-1.json';
.read tpch-sf100-q16.sql
PRAGMA profiling_output='profile-16-2.json';
.read tpch-sf100-q16.sql
PRAGMA profiling_output='profile-16-3.json';
.read tpch-sf100-q16.sql
PRAGMA profiling_output='profile-16-4.json';
.read tpch-sf100-q16.sql
PRAGMA profiling_output='profile-16-5.json';
.read tpch-sf100-q16.sql
PRAGMA profiling_output='profile-17-1.json';
.read tpch-sf100-q17.sql
PRAGMA profiling_output='profile-17-2.json';
.read tpch-sf100-q17.sql
PRAGMA profiling_output='profile-17-3.json';
.read tpch-sf100-q17.sql
PRAGMA profiling_output='profile-17-4.json';
.read tpch-sf100-q17.sql
PRAGMA profiling_output='profile-17-5.json';
.read tpch-sf100-q17.sql
PRAGMA profiling_output='profile-18-1.json';
.read tpch-sf100-q18.sql
PRAGMA profiling_output='profile-18-2.json';
.read tpch-sf100-q18.sql
PRAGMA profiling_output='profile-18-3.json';
.read tpch-sf100-q18.sql
PRAGMA profiling_output='profile-18-4.json';
.read tpch-sf100-q18.sql
PRAGMA profiling_output='profile-18-5.json';
.read tpch-sf100-q18.sql
PRAGMA profiling_output='profile-19-1.json';
.read tpch-sf100-q19.sql
PRAGMA profiling_output='profile-19-2.json';
.read tpch-sf100-q19.sql
PRAGMA profiling_output='profile-19-3.json';
.read tpch-sf100-q19.sql
PRAGMA profiling_output='profile-19-4.json';
.read tpch-sf100-q19.sql
PRAGMA profiling_output='profile-19-5.json';
.read tpch-sf100-q19.sql
PRAGMA profiling_output='profile-20-1.json';
.read tpch-sf100-q20.sql
PRAGMA profiling_output='profile-20-2.json';
.read tpch-sf100-q20.sql
PRAGMA profiling_output='profile-20-3.json';
.read tpch-sf100-q20.sql
PRAGMA profiling_output='profile-20-4.json';
.read tpch-sf100-q20.sql
PRAGMA profiling_output='profile-20-5.json';
.read tpch-sf100-q20.sql
PRAGMA profiling_output='profile-21-1.json';
.read tpch-sf100-q21.sql
PRAGMA profiling_output='profile-21-2.json';
.read tpch-sf100-q21.sql
PRAGMA profiling_output='profile-21-3.json';
.read tpch-sf100-q21.sql
PRAGMA profiling_output='profile-21-4.json';
.read tpch-sf100-q21.sql
PRAGMA profiling_output='profile-21-5.json';
.read tpch-sf100-q21.sql
PRAGMA profiling_output='profile-22-1.json';
.read tpch-sf100-q22.sql
PRAGMA profiling_output='profile-22-2.json';
.read tpch-sf100-q22.sql
PRAGMA profiling_output='profile-22-3.json';
.read tpch-sf100-q22.sql
PRAGMA profiling_output='profile-22-4.json';
.read tpch-sf100-q22.sql
PRAGMA profiling_output='profile-22-5.json';
.read tpch-sf100-q22.sql



-- from (from read_json('profile*.json', filename=TRUE) select latency, string_split(filename, '-') exp) select exp[2] query, median(latency) group by all order by query;